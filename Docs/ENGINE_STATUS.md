# Состояние движка LEN — краткая документация

## Обзор

LEN — экспериментальный игровой движок на C++ с минимальной подсистемой рендеринга и обработки ввода. Проект содержит
основу для работы с мешами, шейдерами, простую компонентную модель и демонстрационные объекты.

## Текущая функциональность (реализовано)

- Рендеринг:
    - Создание шейдерных программ через GraphicsAPI (например, вызовы вида CreateShaderProgram).
    - Поддержка простого вершинного формата (позиция + цвет).
    - Индексированные меши: классы для хранения вершин и индексов, привязка VertexLayout.
    - Материалы, которые хранят шейдерную программу и используются MeshComponent для отрисовки.
- Сцена и объекты:
    - GameObject с трансформацией и возможностью добавления компонентов.
    - Простейшая компонентная система: MeshComponent привязывается к объекту и отрисовывает меш.
- Ввод:
    - InputManager с возможностью опроса клавиш (IsKeyPressed).
    - Тестовый объект умеет реагировать на W/A/S/D и стрелки для перемещения.
- Интеграция:
    - GLFW используется для создания окна и контекста OpenGL.
    - Синглтон-объект Engine для централизованного доступа к подсистемам (графика, ввод и т. п.).

## Последние изменения (фикс)

- Исправлена опечатка в макросе `COMPONENT` в `Engine/Source/Core/scene/Component.hpp` (`ovveride` → `override`).
- Исправлена структура макроса `COMPONENT`: убрана лишняя закрывающая скобка и корректно закрывается пространство имён
  `LEN`.
- Добавлена пропущенная точка с запятой при использовании `COMPONENT` в `CameraComponent.hpp`.

## Ключевые места реализации

- `App/Source/TestObject.cpp` — демонстрационный объект; создаёт шейдеры (вершинный и фрагментный), материал, меш (
  вершины: позиция(3) + цвет(3)) и добавляет MeshComponent.
    - Вершина: 6 float (3 позиции + 3 цвета).
    - Шейдер фрагмента использует переданный из вершин цвета как vec4(vColor, 1.0), чтобы обойти отсутствие поддержки
      vec4-uniform в текущих материалах.
    - VertexLayout задаёт элементы: location 0 — позиция, location 1 — цвет; stride = sizeof(float) * 6.

## Ограничения и известные пробелы (TODO)

- Нет менеджера ресурсов: шейдеры, текстуры и меши не кэшируются централизованно.
- Отсутствует поддержка UV, нормалей, освещения и продвинутых материалов (uniform-параметры, текстуры).
- Компонентная система упрощена: нет управления жизненным циклом компонентов и сцены в целом.
- Нет физики, аудио, сетевой подсистемы и редактора уровней.
- Ограниченная обработка ошибок при компиляции шейдеров и создании GPU-ресурсов (следует логировать и возвращать
  диагностические сообщения).

## Как протестировать локально

1. Открыть проект в IDE (CLion, Visual Studio или другой CMake-совместимой среде).
2. Убедиться, что установлены инструменты сборки (MSVC toolset на Windows) и доступны заголовки стандартной библиотеки
   C++.
3. Сконфигурировать и собрать проект (пример для командной строки):

```powershell
cmake -S . -B cmake-build-debug -G "Ninja" # или генератор вашей IDE
cmake --build cmake-build-debug --target LENApp -j 8
```

4. Если в процессе сборки появятся ошибки по отсутствующим заголовкам stdlib (например, <string>, <array>, <memory>),
   убедитесь, что SDK/VC toolset корректно установлен и путь к стандартной библиотеке доступен для компилятора.

## Краткая карта соответствия требований и статуса

- Документация текущего состояния — Done.
- Описание реализации в `App/Source/TestObject.cpp` — Done (см. раздел "Ключевые места реализации").
- Список ограничений и рекомендации — Done.

---
Если нужно, могу:

- Добавить в документ ссылки на точные строки в `TestObject.cpp` или другие файлы.
- Перевести документ на англ. язык и добавить в README ссылку на него.
- Запустить полную сборку и исправить остальные возникающие ошибки сборки (например, отсутствующие include системных
  заголовков или ошибки конфигурации среды).
